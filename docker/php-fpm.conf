[www]
; PHP-FPM Configuration for Laravel

; The address on which to accept FastCGI requests
listen = 0.0.0.0:9000

; Enable status page
pm.status_path = /status
ping.path = /ping

; Process manager configuration
pm = dynamic
pm.max_children = 20
pm.start_servers = 5
pm.min_spare_servers = 3
pm.max_spare_servers = 10
pm.process_idle_timeout = 10s

; Timeout for idle workers
pm.max_requests = 500
pm.max_requests_grace_period = 30s

; Logging
catch_workers_output = yes
decorate_workers_output = no

; Security
clear_env = no

; Resource limits
rlimit_files = 65535
rlimit_core = unlimited

; Chdir to this directory on startup
; chdir = /var/www/html

; Error log
error_log = /proc/self/fd/2
access.log = /proc/self/fd/1

; Slowlog configuration
slowlog = /proc/self/fd/2
request_slowlog_timeout = 10s

; Process variables
env[LARAVEL_ENV] = production
env[LOG_CHANNEL] = stack
